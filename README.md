## Boson

<p align="center">
    <a href="https://packagist.org/packages/serafim/boson"><img src="https://poser.pugx.org/serafim/boson/require/php?style=for-the-badge" alt="PHP 8.4+"></a>
    <a href="https://packagist.org/packages/serafim/boson"><img src="https://poser.pugx.org/serafim/boson/version?style=for-the-badge" alt="Latest Stable Version"></a>
    <a href="https://packagist.org/packages/serafim/boson"><img src="https://poser.pugx.org/serafim/boson/v/unstable?style=for-the-badge" alt="Latest Unstable Version"></a>
    <a href="https://raw.githubusercontent.com/SerafimArts/Boson/blob/master/LICENSE"><img src="https://poser.pugx.org/serafim/boson/license?style=for-the-badge" alt="License MIT"></a>
    <a href="https://github.com/xepozz/meta-storm-idea-plugin"><img src="https://img.shields.io/static/v1?label=Powered+by&message=Meta+Storm&color=db5860&style=for-the-badge&logo=data:image/svg%2bxml;base64,PHN2ZyB3aWR0aD0iMTExIiBoZWlnaHQ9IjExMSIgdmlld0JveD0iMCAwIDExMSAxMTEiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYwLjQ2MTcgOEwzMC4xNjU0IDguMjQ3OUMyNy4yNDYgOC4yNzE3OSAyNC42NDggMTAuMTA1IDIzLjY0NyAxMi44NDc1TDAuNDMwNTkgNzYuODMxNEMtMS4yNDQ1OSA4MS40MjA4IDIuMTc4MDUgODYuMjcxMyA3LjA2MzUzIDg2LjIzMTNMMzIuMTE5NyA4Ni4wMjYzTDM1LjQxNDcgNzYuOTk5TDkuODczOTEgNzcuMjA4TDMxLjYyNTkgMTcuMjM2Mkw1Ny4xNjY2IDE3LjAyNzNMNjAuNDYxNyA4WiIgZmlsbD0iI0FGQjFCMyIvPjxwYXRoIGQ9Ik00OS40MTQ5IDEwMi45OTlMNzkuNzEyMiAxMDIuOTk5QzgyLjYzMTcgMTAyLjk5OSA4NS4yNDQ2IDEwMS4xODcgODYuMjY4IDk4LjQ1MjlMMTEwLjAxMyAzNC40NTI0QzExMS43MjYgMjkuODc2OCAxMDguMzQzIDI0Ljk5ODUgMTAzLjQ1NyAyNC45OTg1TDc4LjQwMDQgMjQuOTk4NUw3NS4wMzE2IDMzLjk5ODVMMTAwLjU3MyAzMy45OTg1TDc4LjMyNTMgOTMuOTk5TDUyLjc4MzcgOTMuOTk5TDQ5LjQxNDkgMTAyLjk5OVoiIGZpbGw9IiNBRkIxQjMiLz48cGF0aCBkPSJNMjIgNjFMODYgOEw1NyA1MEw4OS45OTk3IDQ5Ljk5OTdMMjYgMTAzTDU1IDYxSDIyWiIgZmlsbD0iI0M3NTQ1MCIvPjwvc3ZnPg==" alt="MetaStorm"></a>
</p>
<p align="center">
    <a href="https://github.com/SerafimArts/Boson/actions/workflows/tests.yml"><img src="https://img.shields.io/github/actions/workflow/status/SerafimArts/Boson/tests.yml?label=Tests&style=flat-square&logo=unpkg"></a>
    <a href="https://github.com/SerafimArts/Boson/actions/workflows/codestyle.yml"><img src="https://img.shields.io/github/actions/workflow/status/SerafimArts/Boson/codestyle.yml?label=PER-2+CodeStyle&style=flat-square&logo=telegraph"></a>
    <a href="https://github.com/SerafimArts/Boson/actions/workflows/static-analysis.yml"><img src="https://img.shields.io/github/actions/workflow/status/SerafimArts/Boson/static-analysis.yml?label=PHPStan&style=flat-square&logo=data:image/png;base64,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"></a>
</p>

Why Boson? Because it's not an [Electron](https://www.electronjs.org)! 
And much easier than that =)

> Also, this repository contains included high level PHP bindings 
> [for Saucer v6.0](https://github.com/saucer/saucer).

- [Simple Example](#simple-example)
- [Requirements](#requirements)
  - [Windows](#windows)
  - [Linux & BSD](#linux-and-bsd)
  - [MacOS](#macos)
- [Installation](#installation)
- [Usage](#usage)
  - **Application**
    - [Configuration](#application-configuration)
    - [Launching](#application-launching)
    - [Quit](#application-quit) 
  - **Window**
    - [Window Title](#window-title)
    - [Window Size](#window-size)
    - [Window Resizing](#window-resizing)
    - [Window Max Size](#window-max-size)
    - [Window Min Size](#window-min-size)
    - [Window Dark Mode](#window-dark-mode)
    - [Window Decorations](#window-decorations)
  - **WebView**
    - [HTML Content](#webview-html-content)
    - [Navigation to URL](#webview-url-navigation)
    - [Navigation URL info](#webview-url-info)
    - **JavaScript** 
      - [Scripts](#webview-scripts)
      - [Code Evaluation](#webview-code-evaluation)
      - [Creating Functions](#webview-function-bindings)
      - [Code Requests](#webview-requests)
  - **Events**
    - [Events and Intentions](#events-and-intentions)
  - **Misc**
    - [Debug Mode](#debug-mode)
    - [Custom Library](#custom-library)

## Simple Example

```php
use Serafim\Boson\Application;

$app = new Application();

$app->webview->html = <<<'HTML'
    <button onclick="foo('HELLO');">Hello</button>
    HTML;

$app->webview->bind('foo', function (string $message): void {
    var_dump($message);
});

$app->run();
```

## Requirements

- PHP ^8.4
  - ext-ffi

| Platform | X86 | AMD64 | ARM64 | Technologies                                                                                                                                                        |
|----------|-----|-------|-------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Windows  | ✓   | ✓     | ✖     | [Windows API](https://docs.microsoft.com/en-us/windows/win32/apiindex/windows-api-list), [WebView2](https://developer.microsoft.com/en-us/microsoft-edge/webview2/) |
| Linux    | ✓   | ✓     | ✓     | [GTK](https://gtk.org/), [WebKitGTK](https://webkitgtk.org/), [Qt5/Qt6](https://github.com/qt/qtwebkit)                                                             |
| macOS    | ✓   | ✓     | ✓     | Cocoa, [WebKit](https://webkit.org/)                                                                                                                                |

> At the moment, all binaries are supplied [together with the library](./bin). 
> In future versions, a separate platform-dependent installation of 
> assemblies from [the GitHub Actions CI](https://github.com/SerafimArts/Boson/actions/workflows/build.yml) 
> is planned.

### Windows

Requires Windows 10 or higher.

End-users must have the [WebView2 runtime](https://developer.microsoft.com/en-us/microsoft-edge/webview2/) 
installed on their system for any version of Windows before Windows 11.

### MacOS

It appears that no additional dependencies are required.

### Linux and BSD

Supports both [WebKitGTK](https://webkitgtk.org/) and [Qt5](https://github.com/qt/qtwebkit) 
as well as [Qt6](https://github.com/qt/qtwebkit) on Linux.

The default backend is WebKitGtk:
- Debian: `apt install libgtk-4-1 libwebkitgtk-6.0-4`
- Fedora: `dnf install gtk4 webkitgtk6.0`
- FreeBSD: `pkg install webkit2-gtk4`

You can download other assemblies separately from [GitHub Actions](https://github.com/SerafimArts/Boson/actions/workflows/build.yml).
Automatic detection and installation of dependencies is not supported yet.

## Installation

Boson package is available as Composer repository and can 
be installed using the following command in a root of your project:

```bash
$ composer require serafim/boson
```

## Usage

> This documentation corresponds to the latest release (see https://github.com/SerafimArts/Boson/tags). 
> Behavior and code in the `master` branch may differ from what is shown below.

## Application Configuration

An application configuration is built on the basis of the DTO hierarchy, 
which reflects the application hierarchy.

```
ApplicationCreateInfo
  // ... application configs

  window: WindowCreateInfo
    // ... window configs

    webview: WebViewCreateInfo
    // ... webview configs
```

In the PHP code it might look like this:

```php
use Serafim\Boson\ApplicationCreateInfo;
use Serafim\Boson\WebView\WebViewCreateInfo;
use Serafim\Boson\Window\WindowCreateInfo;

$config = new ApplicationCreateInfo(
    debug: false,
    window: new WindowCreateInfo(
        title: 'Hello World!',
        width: 640,
        height: 480,
        webview: new WebViewCreateInfo(
            html: '<h1>Hello!</h1>',
            contextMenu: false,
        ),
    ),
);
```

The configuration is passed to the application itself 
and can be optional.

```php
use Serafim\Boson\Application;
use Serafim\Boson\ApplicationCreateInfo;

// Create an application
$app = new Application();

// Create an application with configuration
$appWithConfig = new Application(new ApplicationCreateInfo(
    debug: false,
));
```


## Application Launching

To start the application, you must call the `run()` method.

```php
$app = new Serafim\Boson\Application();

$app->run();
```

Launching an application blocks the execution thread,
meaning that no further code will be executed until the
application is stopped.

```php
$app = new Serafim\Boson\Application();

$app->run();

echo 'This code DOES NOT execute until the application is stopped!';
```


## Application Quit

To stop the application, you should call the `quit()` method.

```php
$app = new Serafim\Boson\Application();

/// ... do smth

$app->quit();
```

Since exit (according to the logic of work) occurs after the application is 
launched, and launching blocks the thread, it makes sense for the application
to terminate after any event is fired.

```php
use Serafim\Boson\Application;
use Serafim\Boson\Window\Event\WindowMinimized;

$app = new Application();

// The application will exit after minimizing.
$app->events->addEventListener(WindowMinimized::class, function () use ($app) {
    $app->quit();
});

$app->run();
```

It is also worth keeping in mind that the application may close 
automatically after ALL windows are closed. To disable this behavior, 
you should set the `quitOnClose` application config.

```php
use Serafim\Boson\Application;
use Serafim\Boson\ApplicationCreateInfo;

$appWithConfig = new Application(new ApplicationCreateInfo(
    // Disables app quit when all windows are has been closed
    quitOnClose: false,
));
```


### Window Title

To get or update the title, you should change the `$title` property

```php
$app = new Serafim\Boson\Application();

$app->webview->title = 'New Title';

echo 'Current Title: ' . $app->webview->title;

$app->run();
```

Or set title from configuration

```php
$app = new Serafim\Boson\Application(
    info: new \Serafim\Boson\ApplicationCreateInfo(
        window: new Serafim\Boson\Window\WindowCreateInfo(
            title: 'New Title',
        ),
    ),
);

$app->run();
```


### Window Size

To obtain window size, use the `$size` property.

```php
$app = new Serafim\Boson\Application();

echo $app->window->size; // Size(640 × 480)

echo $app->window->size->width; // int(640)
echo $app->window->size->height; // int(480)

$app->run();
```

You also may set default window size via configuration.

```php
$app = new Serafim\Boson\Application(
    info: new \Serafim\Boson\ApplicationCreateInfo(
        window: new Serafim\Boson\Window\WindowCreateInfo(
            width: 640,
            height: 480,
        ),
    ),
);

$app->run();
```


### Window Resizing

To change the size, use the `$size` property.

```php
$app = new Serafim\Boson\Application();

// Update window size to 640×480
$app->window->size->update(640, 480);

// Or set the dimensions explicitly using new Size object
$app->window->size = new Serafim\Boson\Window\Size\Size(640, 480);

$app->run();
```

In addition, each window size can also be changed separately.

```php
$app = new Serafim\Boson\Application();

$app->window->size->width = 640;
$app->window->size->height = 480;

$app->run();
```

To disable the ability to resize a window, pass the appropriate 
`resizable` window configuration option.

```php
$app = new Serafim\Boson\Application(
    info: new \Serafim\Boson\ApplicationCreateInfo(
        window: new Serafim\Boson\Window\WindowCreateInfo(
            resizable: false,
        ),
    ),
);

$app->run();
```


### Window Max Size

To specify the maximum window size, use the `$max` property. The behavior of 
the property is identical to the `$size` property [described above](#window-size).

```php
$app = new Serafim\Boson\Application();

echo $app->window->max; // Will display the maximum allowed window size

$app->window->max->update(1024, 768);

$app->run();
```


### Window Min Size

To specify the maximum window size, use the `$min` property. The behavior of
the property is identical to the `$size` property [described above](#window-size).

```php
$app = new Serafim\Boson\Application();

echo $app->window->min; // Will display the minimum allowed window size

$app->window->min->update(1024, 768);

$app->run();
```


### Window Dark Mode

To set the dark mode (dark theme), use the `$isDarkModeEnabled` 
window's property.

```php
$app = new Serafim\Boson\Application();

$app->window->isDarkModeEnabled = true;

if ($app->window->isDarkModeEnabled) {
    echo 'Dark mode is enabled!';
}

$app->run();
```

Or set dark mode from configuration

```php
$app = new Serafim\Boson\Application(
    info: new \Serafim\Boson\ApplicationCreateInfo(
        window: new Serafim\Boson\Window\WindowCreateInfo(
            darkMode: true,
        ),
    ),
);

$app->run();
```


### Window Decorations

You can DISABLE the standard window\`s title bar, minimize, maximize and close 
buttons. To do this, you should set the `false` for `$isDecorated` property.

```php
$app = new Serafim\Boson\Application();

$app->window->isDecorated = false;

$app->run();
```

Or via configuration options.

```php
$app = new Serafim\Boson\Application(
    info: new \Serafim\Boson\ApplicationCreateInfo(
        window: new Serafim\Boson\Window\WindowCreateInfo(
            decorated: false,
        ),
    ),
);

$app->run();
```

Please note that by disabling the standard title bar and buttons you will not
be able to control the window (moving and resizing), but you can implement 
this behavior yourself using HTML attributes.

```php
$app = new Serafim\Boson\Application(
    info: new \Serafim\Boson\ApplicationCreateInfo(
        window: new Serafim\Boson\Window\WindowCreateInfo(
            decorated: false,
            webview: new \Serafim\Boson\WebView\WebViewCreateInfo(
                html: <<<'HTML'
                    <div data-webview-drag>
                        By dragging this element you can move the window
                    </div>
                    
                    <hr />
                    
                    <div data-webview-resize="br">
                        By dragging this element you can resize the window
                    </div>
                    HTML
            )
        ),
    ),
);

$app->run();
```

- The `data-webview-drag` attribute defines the area by dragging 
  which you can move the window.
- The `data-webview-resize` attribute defines the area by dragging
  which you can resize the window.
  - An `t` attribute's value means the ability to resize vertically, top of the window. 
  - An `b` attribute's value means the ability to resize vertically, bottom of the window. 
  - An `r` attribute's value means the ability to resize horizontally, right of the window. 
  - An `l` attribute's value means the ability to resize horizontally, left of the window.
  - Using combinations such as `tl`, `tr`, `bl` and `br` allows you to specify 
    simultaneous resizing of the window vertically and horizontally.



### WebView HTML Content

To set the content, you should use the `$html` property

```php
$app = new Serafim\Boson\Application();

$app->webview->html = '<button>Do Not Click Me!</button>';

$app->run();
```

Or set html content from configuration

```php
$app = new Serafim\Boson\Application(
    window: new Serafim\Boson\Window\WindowCreateInfo(
        webview: new Serafim\Boson\WebView\WebViewCreateInfo(
            html: '<button>Do Not Click Me!</button>',
        ),
    ),
);

$app->run();
```

Please note that reading this property is NOT possible. If you need to
read the contents, use the [data retrieval method](#code-requests).

```php
use Serafim\Boson\Application;
use Serafim\Boson\WebView\Event\WebViewDomReady;

$app = new Application();

$app->webview->html = '<button>Do Not Click Me!</button>';

$app->events->addEventListener(WebViewDomReady::class, function () use ($app) {
    $html = $app->webview->request('document.body.innerHTML');
    
    var_dump($html);
});

$app->run();
```


### WebView URL Navigation

To load content from the URL, you should use the `$url` property

```php
$app = new Serafim\Boson\Application();

$app->webview->url = 'https://github.com/SerafimArts/Boson';

$app->run();
```

Or set URL from configuration

```php
$app = new Serafim\Boson\Application(
    window: new Serafim\Boson\Window\WindowCreateInfo(
        webview: new Serafim\Boson\WebView\URLWebViewCreateInfo(
            url: 'https://github.com/SerafimArts/Boson',
        ),
    ),
);

$app->run();
```


### WebView URL Info

In addition to navigation to the specified URL address, it is also possible 
to obtain information about the URL.

```php
$app = new Serafim\Boson\Application();

$app->webview->url = 'https://github.com/SerafimArts/Boson';

echo 'URL: ' . $app->webview->url . "\n"; // string("about:blank")

$app->events->addEventListener(WebViewNavigated::class, function () use ($app) {
    echo 'URL: ' . $app->webview->url . "\n"; // string("https://github.com/SerafimArts/Boson")
});

$app->run();
```

In addition, you can get separate information about the URL parts.

```php
$app = new Serafim\Boson\Application();

$app->webview->url = 'https://github.com/SerafimArts/Boson';

$app->events->addEventListener(WebViewNavigated::class, function () use ($app) {
    echo 'Scheme: ' . $app->webview->url->scheme . "\n"; // string("https")
    echo 'Host:   ' . $app->webview->url->host . "\n";   // string("github.com")
    echo 'Path:   ' . $app->webview->url->path . "\n";   // string("/SerafimArts/Boson")
});

$app->run();
```


### WebView Code Evaluation

You can execute arbitrary code directly on current WebView

```php
$app = new Serafim\Boson\Application();

// Load empty page
$app->webview->html = '';
// Evaluate JS code on this page
$app->webview->eval('document.write("Hello World!")');

$app->run();
```


### WebView Scripts

You can register a JavaScript code that will be applied to any page.

```php
$app = new Serafim\Boson\Application();

$app->webview->scripts->add(<<<'JS'
    alert('hello');
    JS);

$app->run();
```

Or set scripts from configuration

```php
$app = new Serafim\Boson\Application(
    window: new Serafim\Boson\Window\WindowCreateInfo(
        webview: new Serafim\Boson\WebView\WebViewCreateInfo(
            scripts: [<<<'JS'
                alert('hello');
                JS],
        ),
    ),
);

$app->run();
```

It is worth noting that adding code is available in several options.

```php
$app = new Serafim\Boson\Application();

// "This code will be executed BEFORE the page loads: undefined"
$app->webview->scripts->preload(<<<'JS'
    console.log('This code will be executed BEFORE the page loads: ' + document?.body?.innerHTML);
    JS);

// "This code will be executed AFTER the page loads: <b>hello</b>"
$app->webview->scripts->add(<<<'JS'
    console.log('This code will be executed AFTER the page loads: ' + document?.body?.innerHTML);
    JS);
    
$app->webview->html = '<b>hello</b>';

$app->run();
```


### WebView Function Bindings

You can create a function that can be called directly from WebView

```php
$app = new Serafim\Boson\Application();

$app->webview->bind('foo', function () { 
    var_dump('Executed!');
});

$app->run();
```

Or set functions list from configuration

```php
$app = new Serafim\Boson\Application(
    window: new Serafim\Boson\Window\WindowCreateInfo(
        webview: new Serafim\Boson\WebView\WebViewCreateInfo(
            functions: ['foo' => function () { 
                var_dump('Executed!');
            }],
        ),
    ),
);

$app->run();
```


### WebView Requests

You can directly get data from WebView context.

```php
$app = new Serafim\Boson\Application();

$app->events->addEventListener(WebViewDomReady::class, function () use ($app) {
    var_dump($app->webview->request('document.location')); 
    // array:10 [
    //   "ancestorOrigins" => []
    //   "href" => "https://nesk.me/"
    //   "origin" => "https://nesk.me"
    //   "protocol" => "https:"
    //   "host" => "nesk.me"
    //   "hostname" => "nesk.me"
    //   "port" => ""
    //   "pathname" => "/"
    //   "search" => ""
    //   "hash" => ""
    // ]
});

$app->webview->url = 'https://nesk.me';

$app->run();
```

Please note that the request CAN NOT be processed if the 
application is not running.

```php
$app = new Serafim\Boson\Application();

var_dump($app->webview->request('document.location'));
//
// Uncaught Serafim\Boson\WebView\Requests\Exception\UnprocessableRequestException:
//      Request "document.location" could not be processed
//      because application is not running
//

$app->run();
```


### Events and Intentions

Any event is a fact. Events can not be changed or rejected. Unlike events, 
an intent is an attempt by the application or any of its components to do 
something. Any intent can be rejected or modified.

To subscribe to events and intents, the `$events` field is used.

```php
use Serafim\Boson\WebView\Event\WebViewNavigating;
use Serafim\Boson\WebView\Event\WebViewNavigated;

$app = new Serafim\Boson\Application();

$app->events->addEventListener(WebViewNavigating::class, function (WebViewNavigating $intention): void {
    echo 'Try to move on URL: ' . $intention->url . "\n";

    // Randomly block navigating to another URL
    if (\random_int(0, 1)) {
        $intention->cancel();
    }
});

$app->events->addEventListener(WebViewNavigated::class, function (WebViewNavigated $event): void {
    echo 'Navigated to URL: ' . $event->url . "\n";
});

$app->webview->url = 'https://nesk.me';

$app->run();
```


### Debug Mode

To enable debug mode, you should define the `debug: ?bool` 
argument of the `Application` instance.

```php
$app = new Serafim\Boson\Application(
    // true  - enable debug mode
    // false - disable debug mode
    // null  - autodetect debug mode
    debug: true, 
);

$app->run();
```


### Custom Library

To define binary, you should define the `library: ?non-empty-string`
argument of the `Application` instance.

```php
$app = new Serafim\Boson\Application(
    // string - defines pathname to the library
    // null   - autodetect library
    library: __DIR__ . '/path/to/custom-webview.so',
);

$app->run();
```
